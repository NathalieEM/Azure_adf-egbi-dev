{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "adf-egbi-dev"
		},
		"AzureBlobStorage1_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'AzureBlobStorage1'"
		},
		"SharePointOnlineList1_servicePrincipalKey": {
			"type": "secureString",
			"metadata": "Secure string for 'servicePrincipalKey' of 'SharePointOnlineList1'"
		},
		"ls_salesforce_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'ls_salesforce'"
		},
		"ls_salesforce_securityToken": {
			"type": "secureString",
			"metadata": "Secure string for 'securityToken' of 'ls_salesforce'"
		},
		"sqldb_egbi_dev_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sqldb_egbi_dev'"
		},
		"sqldb_sorrelbi_dev_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sqldb_sorrelbi_dev'"
		},
		"st_error_log_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'st_error_log'"
		},
		"SharePointOnlineList1_properties_typeProperties_servicePrincipalId": {
			"type": "string",
			"defaultValue": "a0518f3b-5bac-47c9-8059-20b248658b92"
		},
		"SharepointSire_PR_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://eitangroupna.sharepoint.com/sites/PR/_api/lists/"
		},
		"ls_salesforce_properties_typeProperties_environmentUrl": {
			"type": "string",
			"defaultValue": "https://login.salesforce.com"
		},
		"ls_salesforce_properties_typeProperties_username": {
			"type": "string",
			"defaultValue": "help.desk@qcore.com"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/SharepointToBlobStorage')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "SharepointToBlobStorage",
						"type": "WebActivity",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"url": "https://prod-16.northeurope.logic.azure.com:443/workflows/94197d3f2f6e48d1a791b8641476835a/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=4xmttJ5tK6OrNkrk-gaWO2tIHdsODA-FNm6Q5umKuEI",
							"method": "POST",
							"headers": {
								"Content-Type": "application/json"
							},
							"body": {
								"DataFactoryName": "@{pipeline().DataFactory}",
								"PipelineName": "@{pipeline().Pipeline}"
							}
						}
					}
				],
				"folder": {
					"name": "ScoreCards/ImportFile"
				},
				"annotations": [],
				"lastPublishTime": "2020-08-18T13:00:22Z"
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureBlobStorage1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('AzureBlobStorage1_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SharePointOnlineList1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SharePointOnlineList",
				"typeProperties": {
					"siteUrl": "https://eitangroupna.sharepoint.com/sites/PR",
					"tenantId": "7ef15b48-e070-48c2-b1c5-86e2488d6058",
					"servicePrincipalId": "[parameters('SharePointOnlineList1_properties_typeProperties_servicePrincipalId')]",
					"servicePrincipalKey": {
						"type": "SecureString",
						"value": "[parameters('SharePointOnlineList1_servicePrincipalKey')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SharepointSire_PR')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "RestService",
				"typeProperties": {
					"url": "[parameters('SharepointSire_PR_properties_typeProperties_url')]",
					"enableServerCertificateValidation": true,
					"authenticationType": "Anonymous"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/ls_salesforce')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Salesforce",
				"typeProperties": {
					"environmentUrl": "[parameters('ls_salesforce_properties_typeProperties_environmentUrl')]",
					"username": "[parameters('ls_salesforce_properties_typeProperties_username')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('ls_salesforce_password')]"
					},
					"securityToken": {
						"type": "SecureString",
						"value": "[parameters('ls_salesforce_securityToken')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/sqldb_egbi_dev')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('sqldb_egbi_dev_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/sqldb_sorrelbi_dev')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('sqldb_sorrelbi_dev_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/st_error_log')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('st_error_log_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SalesForce-azure-IR')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "Managed",
				"typeProperties": {
					"computeProperties": {
						"location": "South Central US",
						"dataFlowProperties": {
							"computeType": "General",
							"coreCount": 8,
							"timeToLive": 0
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/integrationRuntime-AWS-Service-SQL')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "SelfHosted",
				"typeProperties": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/ir-sap')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "SelfHosted",
				"typeProperties": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/Dim_Item')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "sp_Dim_Item_Code",
						"type": "SqlServerStoredProcedure",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"storedProcedureName": "[[ScoreCards].[sp_Dim_Item_Code]"
						},
						"linkedServiceName": {
							"referenceName": "sqldb_egbi_dev",
							"type": "LinkedServiceReference"
						}
					}
				],
				"folder": {
					"name": "ScoreCards/Dwh"
				},
				"annotations": [],
				"lastPublishTime": "2020-08-18T13:00:23Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/sqldb_egbi_dev')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Dwh_Dim_Suppliers')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "sp_Insert_Dwh_Dim_Suppliers",
						"type": "SqlServerStoredProcedure",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"storedProcedureName": "[[ScoreCards].[sp_Insert_Dwh_Dim_Suppliers]"
						},
						"linkedServiceName": {
							"referenceName": "sqldb_egbi_dev",
							"type": "LinkedServiceReference"
						}
					}
				],
				"folder": {
					"name": "ScoreCards/Dwh"
				},
				"annotations": [],
				"lastPublishTime": "2020-08-18T13:00:23Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/sqldb_egbi_dev')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Dwh_Suppliers_Audit_Activities_Followup')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "Merge Dwh_Suppliers_Audit_Activities_Followup",
						"type": "SqlServerStoredProcedure",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"storedProcedureName": "[[ScoreCards].[Merge_Dwh_Suppliers_Audit_Activities_Followup]"
						},
						"linkedServiceName": {
							"referenceName": "sqldb_egbi_dev",
							"type": "LinkedServiceReference"
						}
					}
				],
				"folder": {
					"name": "ScoreCards/Dwh"
				},
				"annotations": [],
				"lastPublishTime": "2020-08-18T13:00:24Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/sqldb_egbi_dev')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Stg_Dim_Product')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "sp_Stg_Dim_Product",
						"type": "SqlServerStoredProcedure",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"storedProcedureName": "[[srv].[sp_Stg_Dim_Product]"
						},
						"linkedServiceName": {
							"referenceName": "sqldb_egbi_dev",
							"type": "LinkedServiceReference"
						}
					}
				],
				"folder": {
					"name": "Service/Stg"
				},
				"annotations": [],
				"lastPublishTime": "2020-09-22T09:12:05Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/sqldb_egbi_dev')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Stg_Fact_InstallBase')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "sp_Stg_Fact_InstallBase",
						"type": "SqlServerStoredProcedure",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"storedProcedureName": "[[srv].[sp_Stg_Fact_InstallBase]"
						},
						"linkedServiceName": {
							"referenceName": "sqldb_egbi_dev",
							"type": "LinkedServiceReference"
						}
					}
				],
				"folder": {
					"name": "Service/Stg"
				},
				"annotations": [],
				"lastPublishTime": "2020-09-22T09:12:05Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/sqldb_egbi_dev')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/Stg_Fact_Oscl')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "sp_Stg_Fact_Oscl",
						"type": "SqlServerStoredProcedure",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"storedProcedureName": "[[srv].[sp_Stg_Fact_Oscl]"
						},
						"linkedServiceName": {
							"referenceName": "sqldb_egbi_dev",
							"type": "LinkedServiceReference"
						}
					}
				],
				"folder": {
					"name": "Service/Stg"
				},
				"annotations": [],
				"lastPublishTime": "2020-09-22T09:12:05Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/sqldb_egbi_dev')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/UpdateSapPO')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Updates TakenToSP filed on PORF.Stg_SapPO",
				"activities": [
					{
						"name": "Stored procedure1_copy1",
						"type": "SqlServerStoredProcedure",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"storedProcedureName": "[[PORF].[sp_Update_Stg_SapPO_bByID]",
							"storedProcedureParameters": {
								"ID": {
									"value": {
										"value": "@pipeline().parameters.ID",
										"type": "Expression"
									},
									"type": "Int32"
								}
							}
						},
						"linkedServiceName": {
							"referenceName": "sqldb_egbi_dev",
							"type": "LinkedServiceReference"
						}
					}
				],
				"concurrency": 2,
				"parameters": {
					"ID": {
						"type": "int"
					}
				},
				"folder": {
					"name": "PORF"
				},
				"annotations": [],
				"lastPublishTime": "2020-08-31T07:49:23Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/sqldb_egbi_dev')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/UpdateSapPO1')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Updates TakenToSP filed on PORF.Stg_SapPO",
				"activities": [
					{
						"name": "Stored procedure1_copy1",
						"type": "SqlServerStoredProcedure",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"storedProcedureName": "[[PORF_SORREL].[sp_Update_Stg_SapPO_bByID]",
							"storedProcedureParameters": {
								"ID": {
									"value": {
										"value": "@pipeline().parameters.ID",
										"type": "Expression"
									},
									"type": "Int32"
								}
							}
						},
						"linkedServiceName": {
							"referenceName": "sqldb_egbi_dev",
							"type": "LinkedServiceReference"
						}
					}
				],
				"concurrency": 2,
				"parameters": {
					"ID": {
						"type": "int"
					}
				},
				"folder": {
					"name": "PORF_SORREL/TOdelete"
				},
				"annotations": [],
				"lastPublishTime": "2020-09-30T12:36:26Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/sqldb_egbi_dev')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/UpdateSapPO2')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"description": "Updates TakenToSP filed on PORF.Stg_SapPO",
				"activities": [
					{
						"name": "Stored procedure1_copy1",
						"type": "SqlServerStoredProcedure",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"storedProcedureName": "[[PORF].[sp_Update_Stg_SapPO_bByID]",
							"storedProcedureParameters": {
								"ID": {
									"value": {
										"value": "@pipeline().parameters.ID",
										"type": "Expression"
									},
									"type": "Int32"
								}
							}
						},
						"linkedServiceName": {
							"referenceName": "sqldb_sorrelbi_dev",
							"type": "LinkedServiceReference"
						}
					}
				],
				"concurrency": 2,
				"parameters": {
					"ID": {
						"type": "int"
					}
				},
				"folder": {
					"name": "PORF_SORREL"
				},
				"annotations": [],
				"lastPublishTime": "2020-09-30T13:04:22Z"
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/linkedServices/sqldb_sorrelbi_dev')]"
			]
		}
	]
}