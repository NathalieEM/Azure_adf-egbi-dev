{
	"$schema": "http://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
	"contentVersion": "1.0.0.0",
	"parameters": {
		"factoryName": {
			"type": "string",
			"metadata": "Data Factory name",
			"defaultValue": "adf-egbi-dev"
		},
		"sqldb_egbi_dev_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sqldb_egbi_dev'"
		},
		"ls_salesforce_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'ls_salesforce'"
		},
		"ls_salesforce_securityToken": {
			"type": "secureString",
			"metadata": "Secure string for 'securityToken' of 'ls_salesforce'"
		},
		"st_error_log_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'st_error_log'"
		},
		"SharePointOnlineList1_servicePrincipalKey": {
			"type": "secureString",
			"metadata": "Secure string for 'servicePrincipalKey' of 'SharePointOnlineList1'"
		},
		"AzureBlobStorage1_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'AzureBlobStorage1'"
		},
		"sqldb_sorrelbi_dev_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sqldb_sorrelbi_dev'"
		},
		"sqlsrv_sap_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sqlsrv_sap'"
		},
		"sqlsrv_sap_TestNewQcoreDB_05012020_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sqlsrv_sap_TestNewQcoreDB_05012020'"
		},
		"sql_rptsrv_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'sql_rptsrv'"
		},
		"ls_sap_integrator_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'ls_sap_integrator'"
		},
		"SAP_Integrator_dev_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'SAP_Integrator_dev'"
		},
		"RPTSRV_ReportServer_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'RPTSRV_ReportServer'"
		},
		"RptSrv_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'RptSrv'"
		},
		"AWS_Service_portal_connectionString": {
			"type": "secureString",
			"metadata": "Secure string for 'connectionString' of 'AWS_Service_portal'"
		},
		"SalesforceSandBox_password": {
			"type": "secureString",
			"metadata": "Secure string for 'password' of 'SalesforceSandBox'"
		},
		"SalesforceSandBox_securityToken": {
			"type": "secureString",
			"metadata": "Secure string for 'securityToken' of 'SalesforceSandBox'"
		},
		"ls_salesforce_properties_typeProperties_environmentUrl": {
			"type": "string",
			"defaultValue": "https://login.salesforce.com"
		},
		"ls_salesforce_properties_typeProperties_username": {
			"type": "string",
			"defaultValue": "help.desk@qcore.com"
		},
		"SharePointOnlineList1_properties_typeProperties_servicePrincipalId": {
			"type": "string",
			"defaultValue": "a0518f3b-5bac-47c9-8059-20b248658b92"
		},
		"SharepointSire_PR_properties_typeProperties_url": {
			"type": "string",
			"defaultValue": "https://eitangroupna.sharepoint.com/sites/PR/_api/lists/"
		},
		"SalesforceSandBox_properties_typeProperties_environmentUrl": {
			"type": "string",
			"defaultValue": "qcoremedical--sandbox.my.salesforce.com"
		},
		"SalesforceSandBox_properties_typeProperties_username": {
			"type": "string",
			"defaultValue": "nathalie.mayzlits@qcore.com.sandbox"
		}
	},
	"variables": {
		"factoryId": "[concat('Microsoft.DataFactory/factories/', parameters('factoryName'))]"
	},
	"resources": [
		{
			"name": "[concat(parameters('factoryName'), '/ir-sap')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "SelfHosted",
				"typeProperties": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/integrationRuntime-AWS-Service-SQL')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "SelfHosted",
				"typeProperties": {}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SalesForce-azure-IR')]",
			"type": "Microsoft.DataFactory/factories/integrationRuntimes",
			"apiVersion": "2018-06-01",
			"properties": {
				"type": "Managed",
				"typeProperties": {
					"computeProperties": {
						"location": "South Central US",
						"dataFlowProperties": {
							"computeType": "General",
							"coreCount": 8,
							"timeToLive": 0
						}
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/sqldb_egbi_dev')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('sqldb_egbi_dev_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/ls_salesforce')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Salesforce",
				"typeProperties": {
					"environmentUrl": "[parameters('ls_salesforce_properties_typeProperties_environmentUrl')]",
					"username": "[parameters('ls_salesforce_properties_typeProperties_username')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('ls_salesforce_password')]"
					},
					"securityToken": {
						"type": "SecureString",
						"value": "[parameters('ls_salesforce_securityToken')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/st_error_log')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('st_error_log_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SharePointOnlineList1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SharePointOnlineList",
				"typeProperties": {
					"siteUrl": "https://eitangroupna.sharepoint.com/sites/PR",
					"tenantId": "7ef15b48-e070-48c2-b1c5-86e2488d6058",
					"servicePrincipalId": "[parameters('SharePointOnlineList1_properties_typeProperties_servicePrincipalId')]",
					"servicePrincipalKey": {
						"type": "SecureString",
						"value": "[parameters('SharePointOnlineList1_servicePrincipalKey')]"
					}
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SharepointSire_PR')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "RestService",
				"typeProperties": {
					"url": "[parameters('SharepointSire_PR_properties_typeProperties_url')]",
					"enableServerCertificateValidation": true,
					"authenticationType": "Anonymous"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/AzureBlobStorage1')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureBlobStorage",
				"typeProperties": {
					"connectionString": "[parameters('AzureBlobStorage1_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/sqldb_sorrelbi_dev')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "AzureSqlDatabase",
				"typeProperties": {
					"connectionString": "[parameters('sqldb_sorrelbi_dev_connectionString')]"
				}
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/SharepointToBlobStorage')]",
			"type": "Microsoft.DataFactory/factories/pipelines",
			"apiVersion": "2018-06-01",
			"properties": {
				"activities": [
					{
						"name": "SharepointToBlobStorage",
						"type": "WebActivity",
						"dependsOn": [],
						"policy": {
							"timeout": "7.00:00:00",
							"retry": 0,
							"retryIntervalInSeconds": 30,
							"secureOutput": false,
							"secureInput": false
						},
						"userProperties": [],
						"typeProperties": {
							"url": "https://prod-16.northeurope.logic.azure.com:443/workflows/94197d3f2f6e48d1a791b8641476835a/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=4xmttJ5tK6OrNkrk-gaWO2tIHdsODA-FNm6Q5umKuEI",
							"method": "POST",
							"headers": {
								"Content-Type": "application/json"
							},
							"body": {
								"DataFactoryName": "@{pipeline().DataFactory}",
								"PipelineName": "@{pipeline().Pipeline}"
							}
						}
					}
				],
				"folder": {
					"name": "ScoreCards/ImportFile"
				},
				"annotations": [],
				"lastPublishTime": "2020-10-15T07:53:24Z"
			},
			"dependsOn": []
		},
		{
			"name": "[concat(parameters('factoryName'), '/sqlsrv_sap')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('sqlsrv_sap_connectionString')]"
				},
				"connectVia": {
					"referenceName": "ir-sap",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/ir-sap')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/sqlsrv_sap_TestNewQcoreDB_05012020')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('sqlsrv_sap_TestNewQcoreDB_05012020_connectionString')]"
				},
				"connectVia": {
					"referenceName": "ir-sap",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/ir-sap')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/sql_rptsrv')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('sql_rptsrv_connectionString')]"
				},
				"connectVia": {
					"referenceName": "ir-sap",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/ir-sap')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/ls_sap_integrator')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('ls_sap_integrator_connectionString')]"
				},
				"connectVia": {
					"referenceName": "ir-sap",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/ir-sap')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/SAP_Integrator_dev')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('SAP_Integrator_dev_connectionString')]"
				},
				"connectVia": {
					"referenceName": "ir-sap",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/ir-sap')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/RPTSRV_ReportServer')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('RPTSRV_ReportServer_connectionString')]"
				},
				"connectVia": {
					"referenceName": "ir-sap",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/ir-sap')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/RptSrv')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('RptSrv_connectionString')]"
				},
				"connectVia": {
					"referenceName": "ir-sap",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/ir-sap')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/AWS_Service_portal')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "SqlServer",
				"typeProperties": {
					"connectionString": "[parameters('AWS_Service_portal_connectionString')]"
				},
				"connectVia": {
					"referenceName": "integrationRuntime-AWS-Service-SQL",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/integrationRuntime-AWS-Service-SQL')]"
			]
		},
		{
			"name": "[concat(parameters('factoryName'), '/SalesforceSandBox')]",
			"type": "Microsoft.DataFactory/factories/linkedServices",
			"apiVersion": "2018-06-01",
			"properties": {
				"annotations": [],
				"type": "Salesforce",
				"typeProperties": {
					"environmentUrl": "[parameters('SalesforceSandBox_properties_typeProperties_environmentUrl')]",
					"username": "[parameters('SalesforceSandBox_properties_typeProperties_username')]",
					"password": {
						"type": "SecureString",
						"value": "[parameters('SalesforceSandBox_password')]"
					},
					"securityToken": {
						"type": "SecureString",
						"value": "[parameters('SalesforceSandBox_securityToken')]"
					},
					"apiVersion": "48.0"
				},
				"connectVia": {
					"referenceName": "SalesForce-azure-IR",
					"type": "IntegrationRuntimeReference"
				}
			},
			"dependsOn": [
				"[concat(variables('factoryId'), '/integrationRuntimes/SalesForce-azure-IR')]"
			]
		}
	]
}